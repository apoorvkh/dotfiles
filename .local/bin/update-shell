#!/bin/env zsh

git -C ~ pull

# Update conda base if environment file changed
# "conda compare" not implemented in mamba
command conda compare -n base ~/.conda/base.yml -q &> /dev/null
if [[ $? == 1 ]]; then
    read "yn?Install new updates for your conda base environment? (y/n) "
    if [ "$yn" = "y" ]; then
        conda env update --prefix ~/.local/miniconda3 --file ~/.conda/base.yml --prune
        conda clean --all --quiet --yes
        source ~/.conda/condabin_symlinks.sh
    fi
fi
